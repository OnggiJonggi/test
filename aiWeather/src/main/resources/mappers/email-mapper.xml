<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="emailMapper">

	<resultMap type="MemberToken" id="MemberTokenResultMap">
		<result column="USER_NO" property="userNo"/>
		<result column="TOKEN_NO" property="tokenNo"/>
		<result column="GENERATED_TIME" property="generatedTime"/>
	</resultMap>
	
	<!-- 토큰번호 생성하면 인스턴스에 자동 저장 -->
	<insert id="insertMemberToken" parameterType="MemberToken">
	    <selectKey keyProperty="tokenNo" resultType="int" order="BEFORE">
	        SELECT seq_token.nextval FROM dual
	    </selectKey>
	    INSERT INTO Token (USER_NO, TOKEN_NO, TOKEN)
	    values (#{userNo}, #{tokenNo}, #{token})
	</insert>
	
</mapper>